<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.c64353df96c30bbba49c.css">:root{--color-primary:#3eb0ef;--color-base:#15171a;--color-secondary:#5b7a81;--color-border:#c7d5d8;--color-bg:#f5f5f5;--font-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;--font-serif:Georgia,Times,serif;--font-mono:Menlo,Courier,monospace;--font-light:100;--font-normal:400;--font-bold:700;--font-heavy:800;--height:4rem;--margin:2rem;--radius:0.6rem}a,abbr,acronym,address,applet,article,aside,audio,big,blockquote,body,canvas,caption,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,ul,var,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}img{max-width:100%}html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}a{background-color:transparent}a:active,a:hover{outline:0}b,strong{font-weight:700}dfn,em,i{font-style:italic}h1{margin:.67em 0;font-size:2em}small{font-size:80%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}mark{background-color:#fdffb6}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{margin:0;color:inherit;font:inherit}button{overflow:visible;border:none}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{cursor:pointer;-webkit-appearance:button}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}input{line-height:normal}input:focus{outline:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{box-sizing:content-box;-webkit-appearance:textfield}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}legend{padding:0;border:0}textarea{overflow:auto}table{border-spacing:0;border-collapse:collapse}td,th{padding:0}html{overflow-y:scroll;font-size:62.5%;background:var(--color-base);-webkit-tap-highlight-color:rgba(0,0,0,0)}body,html{overflow-x:hidden}body{color:#3c484e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-size:1.5rem;line-height:1.6em;font-weight:400;font-style:normal;letter-spacing:0;text-rendering:optimizeLegibility;background:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-moz-font-feature-settings:"liga" on}::selection{text-shadow:none;background:#cbeafb}hr{position:relative;display:block;width:100%;margin:1.8em 0 2.4em;padding:0;height:1px;border:0;border-top:1px solid #e3e9ed}audio,canvas,iframe,img,svg,video{vertical-align:middle}fieldset{margin:0;padding:0;border:0}textarea{resize:vertical}blockquote,dl,ol,p,ul{margin:0 0 1.5em}ol,ul{padding-left:1.3em;padding-right:1.5em}ol ol,ol ul,ul ol,ul ul{margin:.5em 0 1em}ul{list-style:disc}ol{list-style:decimal}ol,ul{max-width:100%}li{margin:.5em 0;padding-left:.3em;line-height:1.6em}dt{float:left;margin:0 20px 0 0;width:120px;font-weight:500;text-align:right}dd{margin:0 0 5px;text-align:left}blockquote{margin:.3em 0 1.8em;padding:0 1.6em;border-left:.5em solid #cbeafb}blockquote p{margin:.8em 0;font-size:1.2em;font-weight:300}blockquote small{display:inline-block;margin:.8em 0 .8em 1.5em;font-size:.9em;opacity:.8}blockquote small:before{content:"\2014   \A0"}blockquote cite{font-weight:700}blockquote cite a{font-weight:400}a{color:#26a8ed;text-decoration:none}a:hover{text-decoration:underline}h1,h2,h3,h4,h5,h6{margin-top:0;color:var(--color-base);line-height:1.15;font-weight:700;text-rendering:optimizeLegibility}h1{margin:0 0 .5em;font-size:4rem;font-weight:700}@media (max-width:500px){h1{font-size:2rem}}h2{margin:1.5em 0 .5em;font-size:2rem}@media (max-width:500px){h2{font-size:1.8rem}}h3{margin:1.5em 0 .5em;font-size:1.8rem;font-weight:500}@media (max-width:500px){h3{font-size:1.7rem}}h4{margin:1.5em 0 .5em;font-size:1.6rem;font-weight:500}h5,h6{margin:1.5em 0 .5em;font-size:1.4rem;font-weight:500}.viewport{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column;-webkit-justify-content:space-between;justify-content:space-between;min-height:100vh}.container{max-width:1120px;margin:0 auto;padding:0 4vw}.content{margin:0 auto;font-size:2rem;line-height:1.7em}.content-body{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column;font-family:var(--font-serif)}.post-full-content{max-width:720px;margin:0 auto;background:#fff}.post-feature-image img{margin:0 0 3vw;width:100%;height:500px;-o-object-fit:cover;object-fit:cover}.content-body h1,.content-body h2,.content-body h3,.content-body h4,.content-body h5,.content-body h6{font-family:var(--font-sans-serif)}.content-body h1{margin:1em 0 .5em;font-size:3.4rem;font-weight:700}@media (max-width:500px){.content-body h1{font-size:2.8rem}}.content-title{margin:0 0 .8em;font-size:5rem}@media (max-width:500px){.content-title{margin:.8em 0;font-size:3.4rem}.content{font-size:1.8rem}}.content-body h2{margin:.8em 0 .4em;font-size:3.2rem;font-weight:700}@media (max-width:500px){.content-body h2{font-size:2.6rem}}.content-body h3{margin:.5em 0 .2em;font-size:2.8rem;font-weight:700}@media (max-width:500px){.content-body h3{font-size:2.2rem}}.content-body h4{margin:.5em 0 .2em;font-size:2.4rem;font-weight:700}@media (max-width:500px){.content-body h4{font-size:2.2rem}}.content-body h5{display:block;margin:.5em 0;padding:1em 0 1.5em;border:0;font-family:Georgia,serif;color:var(--color-primary);font-style:italic;font-size:3.2rem;line-height:1.35em;text-align:center}.content-body h6{margin:.5em 0 .2em;font-size:2rem;font-weight:700}.content-body figure{margin:.4em 0 1.6em;font-size:2.8rem;font-weight:700}.content-body pre{margin:.4em 0 1.8em;font-size:1.6rem;line-height:1.4em;white-space:pre-wrap;padding:20px;border-radius:12px}.content-body pre,.site-head{background:var(--color-base);color:#fff}.site-head{padding-top:20px;padding-bottom:20px}.site-nav-item{display:inline-block;padding:5px 10px;color:#fff;opacity:.7}.site-nav-item:hover{text-decoration:none;opacity:1}.site-nav-icon{height:15px;margin:-5px 0 0}.site-logo{height:25px}.site-mast{-webkit-justify-content:space-between;justify-content:space-between}.site-mast,.site-mast-right{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center}.site-mast-right{margin:0 -10px 0 20px}.site-mast-right .site-nav-item:last-child{padding-right:0}.site-banner{max-width:80%;margin:0 auto;padding:10vw 0;text-align:center}.site-banner-title{margin:0;padding:0;color:#fff;font-size:4rem;line-height:1.3em}.site-banner-desc{margin:5px 0 0;padding:0;font-size:2.4rem;line-height:1.3em;opacity:.7}.site-nav{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:space-between;justify-content:space-between;margin:15px 0 0}.site-nav-left{margin:0 20px 0 -10px}.site-nav-right{margin:0 -10px 0 20px}.site-nav-button{display:inline-block;padding:5px 10px;border:1px solid #fff;color:#fff;font-size:1.3rem;line-height:1em;border-radius:var(--radius);opacity:.7}.site-nav-button:hover{text-decoration:none}.site-main{padding:4vw 0}.post-feed{display:grid;-webkit-justify-content:space-between;justify-content:space-between;grid-gap:30px;grid-template-columns:1fr 1fr 1fr}@media (max-width:980px){.post-feed{grid-template-columns:1fr 1fr}}@media (max-width:680px){.post-feed{grid-template-columns:1fr}}.post-card{color:inherit}.post-card,.post-card:hover{text-decoration:none}.post-card-tags{margin:0 0 5px;font-size:1.4rem;line-height:1.15em;color:var(--color-secondary)}.post-card-title{margin:0 0 10px;padding:0}.post-card-excerpt{font-size:1.6rem;line-height:1.55em}.post-card-image{margin:0 0 10px;width:auto;height:200px;background:var(--color-secondary) no-repeat 50%;background-size:cover}.post-card-footer{-webkit-justify-content:space-between;justify-content:space-between;margin:10px 0 0;color:var(--color-secondary)}.post-card-footer,.post-card-footer-left{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center}.post-card-footer-right{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column}.post-card-avatar{width:30px;height:30px;margin:0 7px 0 0;border-radius:100%;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center}.post-card-avatar .author-profile-image{display:block;width:100%;background:var(--color-secondary);border-radius:100%;-o-object-fit:cover;object-fit:cover}.post-card-avatar .default-avatar{width:26px}.tag-header{max-width:690px;margin:0 0 4vw}.tag-header h1{margin:0 0 1rem}.tag-header p{margin:0;color:var(--color-secondary);font-size:2.2rem;line-height:1.3em}@media (max-width:500px){.tag-header{border-bottom:1px solid var(--color-bg);padding-bottom:4vw}.tag-header p{font-size:1.7rem}}.author-header{display:-webkit-flex;display:flex;-webkit-justify-content:space-between;justify-content:space-between;margin:0 0 4vw}.author-header h1{margin:0 0 1rem}.author-header p{margin:0;color:var(--color-secondary);font-size:2.2rem;line-height:1.3em}.author-header-image{-webkit-flex:0 0 auto;flex:0 0 auto;margin:0 0 0 4vw;height:120px;width:120px;border-radius:100%;overflow:hidden}.author-header-meta{display:-webkit-flex;display:flex;margin:1rem 0 0}.author-header-item{display:block;padding:2px 10px}.author-header-item:first-child{padding-left:0}@media (max-width:500px){.author-header{border-bottom:1px solid var(--color-bg);padding-bottom:4vw}.author-header p{font-size:1.7rem}.author-header-image{height:80px;width:80px}}.pagination{position:relative;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;align-items:center;margin:4vw 0 0}.pagination a{display:inline-block;padding:10px 15px;border:1px solid var(--color-border);color:var(--color-secondary);text-decoration:none;font-size:1.4rem;line-height:1em;border-radius:var(--radius)}.pagination-location{position:absolute;left:50%;width:100px;margin-left:-50px;text-align:center;color:var(--color-secondary);font-size:1.3rem}.site-foot{padding:20px 0 40px;color:hsla(0,0%,100%,.7);font-size:1.3rem;background:var(--color-base)}.site-foot-nav{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:space-between;justify-content:space-between}.site-foot-nav a{color:hsla(0,0%,100%,.7)}.site-foot-nav a:hover{text-decoration:none;color:#fff}.site-foot-nav-right a{display:inline-block;padding:2px 5px}.site-foot-nav-right a:last-child{padding-right:0}</style><meta name="generator" content="Gatsby 2.1.30"/><link rel="shortcut icon" href="/icons/icon-48x48.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#15171A"/><link rel="alternate" type="application/rss+xml" href="/rss"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><title data-react-helmet="true">Localize React without Bloating the Bundle</title><link data-react-helmet="true" rel="canonical" href="https://gatsby.ghost.org/localize-react-apps-the-performant-way/"/><meta data-react-helmet="true" name="description" content="There are so many possibilities when you want to localize your application with
your React application. I believe that localization is difficult because it
requires excellence in several pieces of a stack at the same time. You have to
have a working pipeline that can take string resources that would get
translated. Then, you have to have a way to load these strings onto your page or
application. Finally, you have to have a way to take these strings and inject
them into the components inside your"/><meta data-react-helmet="true" property="og:site_name" content="Crash Test Dev"/><meta data-react-helmet="true" name="og:type" content="article"/><meta data-react-helmet="true" name="og:title" content="Localize React without Bloating the Bundle"/><meta data-react-helmet="true" name="og:description" content="There are so many possibilities when you want to localize your application with
your React application. I believe that localization is difficult because it
requires excellence in several pieces of a stack at the same time. You have to
have a working pipeline that can take string resources that would get
translated. Then, you have to have a way to load these strings onto your page or
application. Finally, you have to have a way to take these strings and inject
them into the components inside your"/><meta data-react-helmet="true" property="og:url" content="https://gatsby.ghost.org/localize-react-apps-the-performant-way/"/><meta data-react-helmet="true" property="article:published_time" content="2019-03-26T17:55:16.000+00:00"/><meta data-react-helmet="true" property="article:modified_time" content="2019-03-26T22:21:18.000+00:00"/><meta data-react-helmet="true" name="twitter:title" content="Localize React without Bloating the Bundle"/><meta data-react-helmet="true" name="twitter:description" content="There are so many possibilities when you want to localize your application with
your React application. I believe that localization is difficult because it
requires excellence in several pieces of a stack at the same time. You have to
have a working pipeline that can take string resources that would get
translated. Then, you have to have a way to load these strings onto your page or
application. Finally, you have to have a way to take these strings and inject
them into the components inside your"/><meta data-react-helmet="true" name="twitter:url" content="https://gatsby.ghost.org/localize-react-apps-the-performant-way/"/><meta data-react-helmet="true" name="twitter:label1" content="Written by"/><meta data-react-helmet="true" name="twitter:data1" content="Ken Chau"/><meta data-react-helmet="true" name="twitter:site" content="https://twitter.com/kenneth_chau/"/><meta data-react-helmet="true" name="twitter:creator" content="@kenneth_chau"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:image" content="http://localhost:2368/content/images/2019/03/roman-kraft-136249-unsplash-1.jpg"/><meta data-react-helmet="true" property="og:image" content="http://localhost:2368/content/images/2019/03/roman-kraft-136249-unsplash-1.jpg"/><meta data-react-helmet="true" property="og:image:width" content="1000"/><meta data-react-helmet="true" property="og:image:height" content="523"/><script data-react-helmet="true" type="application/ld+json">
                    {
                        "@context": "https://schema.org/",
                        "@type": "Article",
                        "author": {
                            "@type": "Person",
                            "name": "Ken Chau",
                            "image": "//www.gravatar.com/avatar/45fc02e659e008e7b53c0b8ee8dd71a1?s=250&d=mm&r=x",
                            "sameAs": ["https://twitter.com/kenotron/"]
                        },
                        
                        "headline": "Localize React without Bloating the Bundle",
                        "url": "https://gatsby.ghost.org/localize-react-apps-the-performant-way/",
                        "datePublished": "2019-03-26T17:55:16.000+00:00",
                        "dateModified": "2019-03-26T22:21:18.000+00:00",
                        "image": {
                                "@type": "ImageObject",
                                "url": "http://localhost:2368/content/images/2019/03/roman-kraft-136249-unsplash-1.jpg",
                                "width": "1000",
                                "height": "523"
                            },
                        "publisher": {
                            "@type": "Organization",
                            "name": "Crash Test Dev",
                            "logo": {
                                "@type": "ImageObject",
                                "url": "https://static.ghost.org/v1.0.0/images/ghost-logo.svg",
                                "width": 60,
                                "height": 60
                            }
                        },
                        "description": "There are so many possibilities when you want to localize your application with
your React application. I believe that localization is difficult because it
requires excellence in several pieces of a stack at the same time. You have to
have a working pipeline that can take string resources that would get
translated. Then, you have to have a way to load these strings onto your page or
application. Finally, you have to have a way to take these strings and inject
them into the components inside your",
                        "mainEntityOfPage": {
                            "@type": "WebPage",
                            "@id": "https://gatsby.ghost.org"
                        }
                    }
                </script><link as="script" rel="preload" href="/component---src-templates-post-js-6f785b7181a131fefa27.js"/><link as="script" rel="preload" href="/app-242733aa29944e2ac860.js"/><link as="script" rel="preload" href="/styles-747384eb1d7291a20b05.js"/><link as="script" rel="preload" href="/2-0717f19dd63380cc920f.js"/><link as="script" rel="preload" href="/3-275df5be2c69128e5db6.js"/><link as="script" rel="preload" href="/1-fa927c1304f3d504dbfa.js"/><link as="script" rel="preload" href="/webpack-runtime-fa8fcf77174f620b1652.js"/><link as="fetch" rel="preload" href="/static/d/451/path---localize-react-apps-the-performant-way-fc-2-62f-gQjS09CUM6Dln792TgLEXdZv8i0.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="viewport"><div class="viewport-top"><header class="site-head"><div class="container"><div class="site-mast"><div class="site-mast-left"><a href="/"><img class="site-logo" src="https://static.ghost.org/v1.0.0/images/ghost-logo.svg" alt="Crash Test Dev"/></a></div><div class="site-mast-right"><a href="https://twitter.com/kenneth_chau" class="site-nav-item" target="_blank" rel="noopener noreferrer"><img class="site-nav-icon" src="/images/icons/twitter.svg" alt="Twitter"/></a><a class="site-nav-item" href="https://feedly.com/i/subscription/feed/https://gatsby.ghost.org/rss/" target="_blank" rel="noopener noreferrer"><img class="site-nav-icon" src="/images/icons/rss.svg" alt="RSS Feed"/></a></div></div><nav class="site-nav"><div class="site-nav-left"><a class="site-nav-item" href="/">Home</a><a class="site-nav-item" href="/tag/getting-started/">Tag</a><a class="site-nav-item" href="/author/ghost/">Author</a><a class="site-nav-item" href="https://docs.ghost.org" target="_blank" rel="noopener noreferrer">Help</a></div><div class="site-nav-right"><a class="site-nav-button" href="/about">About</a></div></nav></div></header><main class="site-main"><div class="container"><article class="content"><figure class="post-feature-image"><img src="http://localhost:2368/content/images/2019/03/roman-kraft-136249-unsplash-1.jpg" alt="Localize React without Bloating the Bundle"/></figure><section class="post-full-content"><h1 class="content-title">Localize React without Bloating the Bundle</h1><section class="content-body load-external-scripts"><p>There are so many possibilities when you want to localize your application with your React application. I believe that localization is difficult because it requires excellence in several pieces of a stack at the same time. You have to have a working pipeline that can take string resources that would get translated. Then, you have to have a way to load these strings onto your page or application. Finally, you have to have a way to take these strings and inject them into the components inside your application. As you can see, you can choose just about any tech to help you accomplish these goals. I am documenting a particular set of stack that I believe helps you achieve this in the most performant way with tools that you're already probably using.</p><h2 id="translation-pipeline">Translation Pipeline</h2><p>At <a href="https://github.com/officedev/office-ui-fabric-react">work</a>, we have a translation-as-a-service API that we rely on to refresh localized strings for us every night. There's a growing team that has built a simple <a href="https://devops.azure.com">Azure DevOps</a> task we add as a step in one of our pipelines which runs nightly. </p><p>Not everyone is as fortunate that has something they can use from their own company. Given that, I'll suggest a pattern here as the first step. Do a search for "localization as a service" and look for a vendor that can help add a step in your CI pipeline of choice. Set up a nightly job to refresh your application's localized strings as JSON like this:</p><!--kg-card-begin: markdown--><pre><code class="language-json">{
  &quot;HELLO_NAME&quot;: &quot;Hello {name}!&quot;,
  &quot;CLICK_ME&quot;: &quot;Click me&quot;
}
</code></pre>
<!--kg-card-end: markdown--><h2 id="rendering-localized-strings">Rendering Localized Strings</h2><p>React is a large ecosystem. So then the paradox of choice is real when finding supplemental libraries for React. Conventional wisdom is to find the most popular packages from npmjs.org. So given this, I first looked at <code>react-intl</code> to help me inject localized strings into my application. The issue here is that <code>react-intl</code> uses higher order components all over the place. One of the explicit goals (as I heard it from ReactConf 2018) of React hooks is to do away with depth of the component tree caused by the higher order components. Higher order component, or HOC, is a neat idea until the consumer needed to access the ref to the original wrapped component. When all your components that use localized strings are wrapped in HOCs, your application start to look like a sideways mountain. (aside: go look at your component tree in React DevTool to see if you're suffering from HOC-itis)</p><p>Enter <code><a href="https://github.com/alibaba/react-intl-universal">react-intl-universal</a></code>. The Alibaba Group created this library to get around the HOC issues of <code>react-intl</code>. On top of this, there are times where strings are needed from outside of the component's <code>render()</code> method. It takes 2 steps to place strings inside your components. </p><p>First you have to initialize the locale data. Note that the data can be preloaded from a server or can be retrieved at runtime. The choice is yours. For the most optimal case, we definitely would have the server preload strings right in the app as it is being loaded.</p><p>Let's pretend that <code>./locales/en-US.json</code> has the same content as the example above.</p><!--kg-card-begin: markdown--><pre><code class="language-jsx">// locale data
const locales = {
  &quot;en-US&quot;: require('./locales/en-US.json'),
  &quot;zh-CN&quot;: require('./locales/zh-CN.json'),
};
</code></pre>
<!--kg-card-end: markdown--><p>Then, we initialize the <code>react-intl-universal</code> library inside a <code>componentDidMount()</code> call. And we'll use the localized string inside the <code>render()</code> method with the <code>.get()</code> function: </p><!--kg-card-begin: markdown--><pre><code class="language-jsx">import intl from 'react-intl-universal'; 

class App extends Component {
  state = { isLoading: false }
  componentDidMount() {
    this.loadLocales();
  }

  async loadLocales() {
    await intl.init({
      currentLocale: 'en-US',
      locales,
    });
    this.setState({ isLoading: true });
  }

  render() {
    return (
      !this.state.isLoading &amp;&amp;
      &lt;div&gt;
        {intl.get('HELLO_NAME', {name: 'world'})}
      &lt;/div&gt;
    );
  }

}
</code></pre>
<!--kg-card-end: markdown--><p>Note that the <code>init()</code> call returns a <code>Promise</code>. This means that we can use the async / await syntax to write our string load code. Once this is added, we look at the way we retrieve the strings by key. For that, we use the <code>get()</code>. Get takes in two parameters: the key and some object. Sometimes the strings have slots that can be replaced by the object values.</p><h3 id="loading-localized-strings">Loading Localized Strings</h3><p>This is where it gets interesting. So far, we've assumed that we had the locale data all upfront. This means that all the localized strings would had been loaded inside a bundle or onto the page somehow. Loading all the language strings in one go can only be feasible if the app barely contain any text. If we're using Webpack, we should take advantage of a feature that I recently came to know. We all have seen the dynamic <code>import()</code> syntax:</p><!--kg-card-begin: markdown--><pre><code class="language-jx">const SomeModule = import('some-module');
</code></pre>
<!--kg-card-end: markdown--><p>But, have you seen what Webpack can do with something like this?</p><!--kg-card-begin: markdown--><pre><code class="language-js">const getLocale = (locale) =&gt; import(`./locales/${locale}.json`);
</code></pre>
<!--kg-card-end: markdown--><p>Based on the <code>.json</code> files it finds inside <code>./locales</code>, Webpack is smart enough to generate chunks for dynamic loading! That means your main bundle will not incur the weight of the entire library of localized strings. Putting all these concepts together, I've created a repo to demonstrate concepts from this post:</p><p><a href="https://github.com/kenotron/react-intl-example">https://github.com/kenotron/react-intl-example</a></p><p>I'll go over some of the points from that repo. First, I created a HOC that you place at the ROOT of the application. Don't worry! It is only one HOC for the entire app. It is called <code>LocaleComponent</code> - I'm keeping this strange little name until <code>React.createResource()</code> becomes a thing maybe in the future.</p><!--kg-card-begin: markdown--><pre><code class="language-jsx">const getLocale = (locale: string) =&gt; import(`./locale/${locale}.json`);

class LocaleComponent extends React.Component {
  state = { isLoading: true };
  
  async loadLocales() { 
    const locales = await getLocale('en');
    const currentLocale = 'en';
    await intl.init({ currentLocale, locales });
    this.setState({ isLoading: false });
  }
  
  render() {
    return !this.state.isLoading ? &lt;&gt;this.props.children&lt;/&gt; : null;
  }
}
</code></pre>
<!--kg-card-end: markdown--></section></section></article></div></main></div><div class="viewport-bottom"><footer class="site-foot"><div class="site-foot-nav container"><div class="site-foot-nav-left"><a href="/">Crash Test Dev</a> © 2019 — Published with <a class="site-foot-nav-item" href="https://ghost.org" target="_blank" rel="noopener noreferrer">Ghost</a></div><div class="site-foot-nav-right"><a class="site-foot-nav-item" href="/">Home</a><a class="site-foot-nav-item" href="/tag/getting-started/">Tag</a><a class="site-foot-nav-item" href="/author/ghost/">Author</a><a class="site-foot-nav-item" href="https://docs.ghost.org" target="_blank" rel="noopener noreferrer">Help</a></div></div></footer></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-post-js","jsonName":"localize-react-apps-the-performant-way-fc2","path":"/localize-react-apps-the-performant-way/"};window.dataPath="451/path---localize-react-apps-the-performant-way-fc-2-62f-gQjS09CUM6Dln792TgLEXdZv8i0";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-242733aa29944e2ac860.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-738b71b7a247eda9fd10.js"],"component---src-templates-post-js":["/component---src-templates-post-js-6f785b7181a131fefa27.js"],"component---src-templates-index-js":["/component---src-templates-index-js-86773c881c58b78ac5cc.js"],"component---src-templates-author-js":["/component---src-templates-author-js-6b727cf2de3f9dda3779.js"],"component---src-pages-404-js":["/component---src-pages-404-js-db0edf6d7181b989cf52.js"],"pages-manifest":["/pages-manifest-de23c031c4835cd86f0d.js"]};/*]]>*/</script><script src="/webpack-runtime-fa8fcf77174f620b1652.js" async=""></script><script src="/1-fa927c1304f3d504dbfa.js" async=""></script><script src="/3-275df5be2c69128e5db6.js" async=""></script><script src="/2-0717f19dd63380cc920f.js" async=""></script><script src="/styles-747384eb1d7291a20b05.js" async=""></script><script src="/app-242733aa29944e2ac860.js" async=""></script><script src="/component---src-templates-post-js-6f785b7181a131fefa27.js" async=""></script></body></html>